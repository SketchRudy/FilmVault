<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Film Vault</title>
    <link rel="stylesheet" href="/styles/intro.css">
    <link rel="icon" href="/images/favicon.png">

    <script>
    (function () {
      try {
        if (
          sessionStorage.getItem('seenIntro') === 'yes' ||
          localStorage.getItem('fv_intro_skip') === '1'
        ) {
          // If your ‚Äúhome‚Äù is '/', keep '/'. If it's '/home' or '/vault', use that.
          location.replace('/i'); 
        }
      } catch (_) {}
    })();
  </script>
</head>
<body>

    <section class="vault-intro">
        <h1>üé¨ Welcome to FilmVault</h1>
        <p>
          FilmVault is your cinematic journal - shared shelves, private stories<br>
          Explore the full community vault when signed out.<br> 
          Sign in, and it's all about you: add, rate, and reflect on the movies that matter most.
        </p>

        <button class="vault-continue" onclick="enterVault()">Enter Vault</button>
      </section>

      <script>
    async function enterVault() {
      const section = document.querySelector('.vault-intro');
      section.classList.add('fade-out');
      sessionStorage.setItem('seenIntro', 'yes');

      // Persist across visits if the user wants
      if (document.getElementById('skipForever').checked) {
        localStorage.setItem('fv_intro_skip', '1');
        // Optional cookie for server-side gating (see step 2)
        try { await fetch('/intro/seen', { method: 'POST' }); } catch (_) {}
      }

      // Use replace so the intro isn‚Äôt in the back stack
      setTimeout(() => {
        location.replace('/home'); // or '/'
      }, 600);
    }
  </script>
      

</body>
</html>